# Questions & Answers

| [English version](https://github.com/KonstErz/s_web_project/blob/master/README.md) |

### Сервис реализован с использованием инструментов веб-фреймворка Django.

---


## Назначение

Проект представляет собой сервис ответов на вопросы. Пользователь сервиса имеет возможность зарегистрироваться, задать вопрос, ответить на вопросы других пользователей. Также пользователь может отметить вопросы с помощь кнопки "Like", изменяя их рейтинг.

## Основные сущности проекта

1. Пользователь: имя, пароль, email;
2. Вопрос: заголовок, текст, автор, дата публикации, рейтинг;
3. Ответ: текст, вопрос, дата публикации, автор;
4. Лайк: вопрос, пользователь.

## Формы и страницы проекта

(смотрите примеры скриншотов страниц в директории проекта */public/img/*)

+ **Главная страница**

URL: /

Назначение: представляет из себя список новых вопросов, отсортированных по дате добавления, начиная с самых свежих. Список отображается с использованием нумерации страниц, по 10 вопросов на одной странице.

+ **Список популярных вопросов**

URL: /popular/

Назначение: представляет из себя список "популярных" вопросов. В списке выводятся вопросы в порядке убывания рейтинга с использованием нумерации страниц, по 10 вопросов на одной странице.

+ **Страница одного вопроса**

URL: /question/12/ (где 12 - идентификатор вопроса)

Назначение: на этой странице вы можете увидеть текст вопроса, автора, дату и время публикации, рейтинг и список ответов на вопрос. Эту страницу могут просматривать только авторизованные пользователи. Авторизованные пользователи могут поставить «Лайк» вопросу и могут добавить свой ответ.

+ **Страница регистрации**

URL: /signup/

Назначение: пользователь может ввести свое имя, адрес электронной почты, пароль и зарегистрироваться в проекте.

+ **Страница авторизации**

URL: /login/

Назначение: пользователь может ввести свое имя и пароль и авторизоваться в проекте (войти на сайт).

+ **Страница добавления вопроса**

URL: /ask/

Назначение: авторизованный пользователь может задать вопрос, после чего перейдет на страницу этого вопроса.

+ **Система Like/Dislike**

URL: /like/

Назначение: пользователь может нажать кнопку «Like» у вопроса и это повысит рейтинг вопроса. Пользователь может поставить «Like» не более 1 раза для 1 вопроса. Если пользователю больше не нравится вопрос, он может нажать кнопку «Dislike», и это вернет рейтинг вопроса обратно. Система Like/Dislike реализована с использованием AJAX-запросов.

---


### Краткое руководство по запуску сервиса на вашем локальном компьютере

1. Создайте папку для проекта с названием 'project_name'. Перейдите в эту папку и склонируйте репозиторий с проектом:

    ```
    git clone https://github.com/KonstErz/s_web_project.git
    ```

2. Создайте виртуальное python3-окружение в этой же папке с помощью *virtualenv*:

    ```
    virtualenv -p python3 venv
    ```

где *'venv'* - название виртуального окружения. Если у вас не установлен virtualenv, вы можете установить его, используя команды:
    
    sudo apt update
    sudo apt install virtualenv
    
а также в вашей системе должен быть установлен Python3 (рекомендуется python версии 3.6 и выше).

3. Активируйте виртуальное окружение:

    ```
    . venv/bin/activate
    ```

4. Перейдите в папку проекта и вызовите команду для установки зависимостей:

    ```
    bash commands_2.sh
    ```

Вы можете проверить, находит ли Python модуль Django:
    
    python3 -m django --version
    
5. Этот проект может работать с 2 базами данных: MySQL (по умолчанию) и SQLite 3. Вам нужно перейти в консольный клиент MySQL (используя пароля root) и создать базу данных для работы веб-приложения Django:

    ```
    mysql -u root -p
    
    mysql> CREATE DATABASE askapp CHARACTER SET utf8;
    mysql> CREATE USER 'django'@'localhost' IDENTIFIED BY 'passwrd123';
    mysql> GRANT ALL PRIVILEGES ON askapp.* TO 'django'@'localhost';
    mysql> FLUSH PRIVILEGES;
    ```

Для выхода из MySQL используйте комбинацию клавиш Ctrl+D.

6. Перейдите в директорию *'ask'* проекта с файлом *manage.py*, примените все миграции, создайте суперпользователя и запустите сервер:

    ```
    python3 manage.py makemigrations
    python3 manage.py migrate
    python3 manage.py createsuperuser
    python3 manage.py runserver
    ```

Теперь вы можете перейти на сервер по адресу http://localhost:8000/ в вашем браузере. Попробуйте создать тестового пользователя в системе, добавить новые вопросы и ответы. 
Ctrl+C - для выхода из режима отладки веб-приложения и`deactivate` - команда для выхода из виртуального окружения.

### Краткое руководство по запуску сервиса в проверяющем терминале онлайн-курса «Веб-технологии»

**Внимание! У вас могут возникнуть трудности с отправкой решений на определенных шагах курса. Это связано с устаревшими версиями модулей и нестабильностью проверочных тестов. Дополнительное чтение комментариев к урокам может помочь вам решить вашу проблему.**

1. После запуска тестовой виртуальной машины склонируйте репозиторий с проектом в директорию */home/box/web*:

    ```
    git clone https://github.com/KonstErz/s_web_project.git /home/box/web
    ```

2. Перейдите в директорию */home/box/web* и вызовите команду для установки зависимостей:

    ```
    sudo bash commands_1.sh
    ```

3. В проверяющей системе http-сервер nginx должен прослушивать по умолчанию порт 80 и проксировать запросы клиента на хост application-сервера gunicorn, который эксплуатирует django как wsgi-приложение для обработки запросов. Команды для подключения серверов находятся в файле *init.sh*:

    ```
    bash init.sh
    ```

4. Вы можете столкнуться с неожиданными исключениями со стороны MySQL, поэтому попробуйте запустить свой проект с базой данных SQLite 3 по умолчанию. Для этого отредактируйте файл *home/box/web/ask/ask/settings.py* с помощью редактора *nano*: в разделе *DATABASES* удалите секцию касательно *mysql* и установите имя базы данных *'sqlite3'* в значение *'default'*. Данный раздел должен выглядеть следующим образом:

    ```
    DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.sqlite3',
            'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),
        }
    }
    ```

5. Перейдите в директорию *home/box/web/ask* и проведите все необходимые миграции:

    ```
    python3 manage.py makemigrations
    python3 manage.py migrate
    ```


